!function(){"use strict";function e(e,o){return o.getConversation(e.current.params.cid)}function o(o,t,n,r,s){s.theme("default").primaryPalette("red").accentPalette("blue"),o.when("/candmain",{templateUrl:n.base_url+"assets/zpartials/srch-adv-main.html",controller:"jobsCtrl"}).when("/inbox",{templateUrl:n.base_url+"assets/zpartials/inbox.html",controller:"inboxCtrl"}).when("/inbox/conversation/:cid/:jid?",{templateUrl:n.base_url+"assets/zpartials/conversation.html",controller:"conversationCtrl",resolve:{gconv:e}}).when("/jobcreate",{templateUrl:n.base_url+"assets/zpartials/emplr-job-create.html",controller:"candidateDashApplyJobCtrl"}).when("/job/jobid/:jobid",{templateUrl:n.base_url+"assets/zpartials/cand-job-details.html",controller:"jobDetailsCtrl"}).when("/jobedit/jobid/:jobid",{templateUrl:n.base_url+"assets/zpartials/emplr-job-edit.html",controller:"jobDetailsCtrl"}).when("/profile",{templateUrl:n.base_url+"assets/zpartials/cand-profile.html",controller:"candidateProfileCrtl"}).when("/takequiz",{templateUrl:n.base_url+"assets/zpartials/cand-takequiz.html",controller:"quizCtrl"}).when("/adv/:empid?",{templateUrl:n.base_url+"assets/zpartials/srch-adv_tab.html"}).when("/map",{templateUrl:n.base_url+"assets/zpartials/srch-map.html",controller:"JobMapCtrl"}).when("/building",{templateUrl:n.base_url+"assets/zpartials/srch-adv-main.html",controller:"candidateCtrl"}).when("/employers",{templateUrl:n.base_url+"assets/zpartials/srch-emplr.html",controller:"candidateCtrl"}).when("/media",{templateUrl:n.base_url+"assets/zpartials/media.html",controller:"candidateCtrl"}).when("/favs",{templateUrl:n.base_url+"assets/zpartials/cand-favorites.html",controller:"favsCtrl"}).when("/animation",{templateUrl:n.base_url+"assets/zpartials/animations.html",controller:"AnimCtrl"}).when("/applied",{templateUrl:n.base_url+"assets/zpartials/cand-applied.html",controller:"applicationsCtrl"}).when("/login",{templateUrl:n.base_url+"assets/zpartials/cand-login.html",controller:"LoginCtrl"}).when("/register",{templateUrl:n.base_url+"assets/zpartials/cand-register.html",controller:"RegisterCtrl"}).when("/forgetpwd",{templateUrl:n.base_url+"assets/zpartials/emplr-forgetpwd.html",controller:"ForgetCtrl"}).when("/forgetpwd/:resettoken",{templateUrl:n.base_url+"assets/zpartials/emplr-forgetpwd.html",controller:"ForgetCtrl"}).when("/verifymail/:verificationcode",{templateUrl:n.base_url+"assets/zpartials/emplr-email-verify.html",controller:"VerifyCtrl"}).when("/go/:companyname",{templateUrl:n.base_url+"assets/zpartials/empl-landing-public.html",controller:"employerslandingCrtl"}).when("/go/:companyname/events",{templateUrl:n.base_url+"assets/zpartials/cand-emplr-calendar.html",controller:"CalendarEmplrCtrl"}).when("/feedback/:token",{templateUrl:n.base_url+"assets/zpartials/cand-feedback.html",controller:"feedbackCtrl"}).when("/calendar",{templateUrl:n.base_url+"assets/zpartials/cand-calendar.html",controller:"CalendarCtrl"}).when("/calendar/:companyname",{templateUrl:n.base_url+"assets/zpartials/cand-emplr-calendar.html",controller:"CalendarEmplrCtrl"}).otherwise({redirectTo:"/candmain"})}var t=angular.module("myApp");o.$inject=["$routeProvider","$httpProvider","ENV","$locationProvider","$mdThemingProvider"],t.config(o),e.$inject=["$route","InboxManager"]}(),function(){"use strict";function e(e){e.defaults={permanentErrors:[404,500,501],maxChunkRetries:1,chunkRetryInterval:5e3,simultaneousUploads:4,singleFile:!0},e.on("catchAll",function(e){console.log("catchAll",arguments)}),e.on("filesSubmitted",function(e){console.log("prevent default")})}var o=angular.module("myApp");e.$inject=["flowFactoryProvider"],o.config(e)}(),function(){"use strict";function e(){return{restrict:"EA",template:'<input name="{{inputName}}" ng-model="inputValue" maxlen="inputLength"/>',scope:{inputValue:"=",inputName:"=",inputLength:"="},link:function(e){e.$watch("inputValue",function(o,t){var n=String(o).split("");0!==n.length&&(1!==n.length||"-"!=n[0]&&"."!==n[0])&&(2!==n.length||"-."!==o)&&(isNaN(o)||n.length>e.inputLength)&&(e.inputValue=t)})}}}var o=angular.module("myApp");o.directive("numberOnlyInput",e)}(),function(){"use strict";function e(){return{restrict:"AEC",require:"ngModel",link:function(e,o,t,n){var r="#"+t.pwCheck;$(o).add(r).on("keyup",function(){e.$apply(function(){if(""!=$(o).val()&&""!=$(r).val()){var e=$(o).val()===$(r).val();console.log("tell me v: "+e),n.$setValidity("pwmatch",e)}})})}}}var o=angular.module("myApp");o.directive("pwCheck",e)}(),function(){"use strict";function e(e,o,t){return{restrict:"A",require:"ngModel",link:function(n,r,s,a){var i;return n.$watch(function(){return a.$modelValue},function(r){e.cancel(i),""===r&&a.$setValidity("unique",!0),console.log(t.rest_server+"employers/EmployerLandingPageList/:companypagename?token="+n.token);var s=o(t.rest_server+"employers/EmployerLandingPageList/:companypagename?token="+n.token,{companypagename:"@companypagename"});i=e(function(){s.query({companypagename:r},function(e){return console.log(e.length),a.$setValidity("unique",0===e.length)})},200)})}}}var o=angular.module("myApp");e.$inject=["$timeout","$resource","ENV"],o.directive("nameUnique",e)}(),function(){"use strict";function e(e){this.name=e.get("name"),this.loggedIn=function(){var o=e.get("cand_token");return void 0==o?!1:!0}}var o=angular.module("myApp");e.$inject=["$cookieStore"],o.service("mySession",e)}(),function(){"use strict";function e(e,o,t,n){this.srch={keyword:"",currentPage:"1",entryLimit:"5",filteredItems:"",totalItems:"",cat:"",catname:"",radius:"",radiusCenter:"",type:"",typename:"",town:"",townname:"",zipcode:""},this.mapState={centerLat:1.3058358,centerLong:103.8618718,zoom:11},this.foundJobs=[];this.getKeyword=function(){return this.srch.keyword},this.geocodeZip=function(e){var t=new google.maps.Geocoder,n={address:e,region:"SG"};return o(function(e,o){t.geocode(n,function(t,n){if(n==google.maps.GeocoderStatus.OK){var r=t[0].geometry.location;e(r)}else o(n)})})},this._buildQueryUrl=function(e){var o=t.rest_server+"jobs",n="";return _.isEmpty(e)||(n=_.reduce(e,function(e,o,t){return e+"/"+t+"/"+o},"/search")),o+n},this._filterByKeyword=function(e,o){return _(e).filter(function(e){return-1!==e.title.toLowerCase().indexOf(o.toLowerCase())})},this.searchJobs=function(r){var s={};this.srch.keyword&&(s.keyword=this.srch.keyword),this.srch.cat&&(s.category=this.srch.cat),this.srch.type&&(s.type=this.srch.type),this.srch.town&&(s.town=this.srch.town),this.srch.zipcode&&this.srch.radius&&(s.zipcode=this.srch.zipcode),console.log("mySearch.srch:",this.srch);var a=this;if(_.isEmpty(s)){if(console.log("GENERAL SEARCH"),!_.isUndefined(r)&&r.token)var i=r.token;else var i="";return o(function(o,n){e.get(t.rest_server+"jobs?token="+i).success(function(e){console.log("general search success"),a.foundJobs=e,o(e)}).error(function(e,o){console.log("general search reject"),n(o)})})}var l=this._buildQueryUrl(s)+"?token=";return l+=n.get("cand_token")?n.get("cand_token"):"",o(function(o,t){function n(){e.get(l).success(function(e){s.keyword&&s.distance&&(e=a._filterByKeyword(e,s.keyword)),a.foundJobs=e,console.group("mySearch.searchJobs: Success, "+e.length+" jobs"),console.log(l),console.log(e),console.groupEnd(),o(e)}).error(function(e,o){console.error("mySearch.searchJobs: Error searching Jobs:"+o),t(o)})}var r=a.srch.zipcode,i=a.srch.radius;r&&i?(console.group("zipcode lookup:",r),a.geocodeZip(r).then(function(e){console.log("found pos:",e.lat(),e.lng()),s.distance=parseInt(i)/1e3,s.latitude=e.lat(),s.longitude=e.lng(),a.srch.radiusCenter=e,l=a._buildQueryUrl(s),console.log("rewriting query:",l),console.groupEnd(),n()},function(e){console.log("zip lookup failed:",e),console.groupEnd(),n()})):n()})},this.setCategory=function(e,o){this.srch.cat=e,this.srch.catname=o},this.setRadius=function(e){this.srch.radius=e},this.setType=function(e,o){this.srch.type=e,this.srch.typeName=o},this.setTown=function(e,o){this.srch.town=e,this.srch.townName=o},this.resetSrch=function(){console.log("Inside resetSrch"),this.srch.keyword="",this.srch.currentPage="",this.srch.entryLimit="",this.srch.filteredItems="",this.srch.totalItems="",this.srch.cat="",this.srch.catname="",this.srch.radius="",this.srch.radiusCenter="",this.srch.type="",this.srch.typename="",this.srch.town="",this.srch.townname=""}}var o=angular.module("myApp");e.$inject=["$http","$q","ENV","$cookieStore"],o.service("mySearch",e)}(),function(){"use strict";function e(e,o,t){t.searchfields=[],t.searchreference={categories:{},towns:{},types:{}},e.get(o.rest_server+"searchfields").success(function(e){t.searchfields=e;for(var o in e)for(var n=e[o],r=0;r<n.length;r++){var s=n[r];t.searchreference[o][s.id]=s.name}console.log(t.searchreference)}).error(function(e,o){return!1})}var o=angular.module("myApp");e.$inject=["$http","ENV","$rootScope"],o.service("mySearchFields",e)}(),function(){"use strict";function e(e,o,t,n){this.favorite=function(r,s){console.log("Favoriting job id: "+r);var a=e.defer(),i=o.get("cand_token");return"0"==s?(console.log("myFav Enablining favorite, current val: "+s),t.post(n.rest_server+"favorites?token="+i,{job_id:r}).success(function(e,o){a.resolve("1")}).error(function(e,o){a.reject(e,o)}),a.promise):(console.log("Disabling favorite, current val: "+s),t({url:n.rest_server+"favorites?token="+i,method:"DELETE",data:{job_id:r},headers:{"Content-Type":"application/json; charset=UTF-8"}}).success(function(e,o,t,n){console.log("jobsCtrl: deleted favorite successfully for job: "+r),a.resolve("0")}),a.promise)}}var o=angular.module("myApp");e.$inject=["$q","$cookieStore","$http","ENV"],o.service("myFavorites",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a,i,l){o.token=n.get("cand_token"),void 0!==o.token&&(console.log("LoginCtrl: ******* Scope EMployer token = "),console.log(o.token),r.path("/login")),console.log("LoginCtrl:  what is this?: "+r.search().ftl),"1"===r.search().ftl?o.showFirstTimeLogin=!0:o.showFirstTimeLogin=!1,o.loginFn=function(c,u,d){console.log("LoginCtrl: Called loginFn()..."),console.info(c),console.log("LoginCtrl: "+u.target),$(u.target).button("loading"),t.post(s.rest_server+"candidates/auth",c).success(function(t,s,g,p){$(u.target).button("reset"),200===s?(o.loginfail=!1,void 0!==t.token&&(n.put("cand_token",t.token),n.put("name",t.name),o.token=n.get("cand_token"),a.name=n.get("name"),t.msgs&&i.show(i.alert().parent(angular.element(document.body)).title("Message").content(t.msgs).ariaLabel("Message").ok("Got it!").targetEvent()),e.name=a.name,o.$emit("loginout",""),void 0==d||"1"!=d?r.path("/candmain"):(l.reload(),i.hide(c)))):(console.log("oooh, something went wrong: "+s),o.token=!1,429==s&&i.show(i.alert().parent(angular.element(document.body)).title("Login attempts exceeded").content("You have exceeded your login attempt limit, please try again in 15 minutes. Thank you.").ariaLabel("Login attempts exceeded").ok("OK!").targetEvent()))}).error(function(e,t,n,r){$(u.target).button("reset"),console.log("Attempts:  "+e.attempts+"  Status: "+t),console.info(e),o.token=!1,429==t&&i.show(i.alert().parent(angular.element(document.body)).title("Login attempts exceeded").content("You have exceeded your login attempt limit, please try again in 15 minutes. Thank you.").ariaLabel("Login attempts exceeded").ok("OK!").targetEvent())})},o.closeDialog=function(e){i.hide()}}var o=angular.module("myApp");e.$inject=["$rootScope","$scope","$http","$cookieStore","$location","ENV","mySession","$mdDialog","$route"],o.controller("LoginCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r){e.verificationcode=r.verificationcode,console.log(e.verificationcode),e.verificationmsg="",o.get(n.rest_server+"candidates/emailverification/"+e.verificationcode).success(function(o,n,r,s){console.log("VerifyCtrl: AJAX is "+n),200===n?(console.log("VerifyCtrl: response msg "+o.msg),"emailchanged"==o.msg?confirm("Your email is updated, please use your new email to login.")&&(e.verificationcode="",t.path("/login")):"success"==o.msg?confirm("Your email is verified, please use your email to login.")&&(e.verificationcode="",t.path("/login")):confirm("Sorry, your email is not verified.Please try again")&&(e.verificationcode="",t.path("/login"))):confirm("Something went wrong.")&&(e.verificationcode="",t.path("/login"))}).error(function(o,t,n,r){console.log("Login AJAX Error! "+t),e.resettoken=""})}var o=angular.module("myApp");e.$inject=["$scope","$http","$location","ENV","$routeParams"],o.controller("VerifyCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s){e.resettoken=s.resettoken,console.log(e.resettoken),e.EmailNotExist=!1,e.ResetMailSent=!1,e.forgetFn=function(t,n){console.log("ForgetCtrl: Called forgetFn()"),console.log("ForgetCtrl: "+t),console.log("ForgetCtrl: "+n.target),$(n.target).button("loading"),o.post(r.rest_server+"candidates/reset",t).success(function(o,t,r,s){console.log("ForgetCtrl: AJAX is "+t),200===t?(console.log("ForgetCtrl: response msg "+o.msg),"emailnotexist"==o.msg?alert("Your email is not registered, please try again."):(e.resettoken="",alert("A password reset link has sent to your email inbox"))):(console.log("something went wrong: "+t),e.resettoken=""),setTimeout(function(){$(n.target).button("reset")},1e3)}).error(function(o,t,n,r){console.log("Login AJAX Error! "+t),e.resettoken=""})},e.changeFn=function(t,n){e.pwdchange.$valid&&(console.log("ForgetCtrl: Called changeFn()"),console.log("ForgetCtrl: "+t),console.log("ForgetCtrl: "+n.target),$(n.target).button("loading"),o.post(r.rest_server+"candidates/changepwd/"+e.resettoken,t).success(function(o,t,n,r){console.log("ForgetCtrl: AJAX is "+t),200===t?(console.log("ForgetCtrl: response msg"+o.msg),"success"==o.msg?alert("Your password has been updated, please logout try to login using your new password"):"tokenexpired"==o.msg?alert("Your password reset link is expired, please send a new request"):"wrongemail"==o.msg?alert("Wrong Email entered"):"0"==o.msg?alert("Something went wrong"):alert("updated successfully"),e.changeView("/login")):(console.log("something went wrong: "+t),e.resettoken="")}).error(function(o,t,n,r){console.log("Login AJAX Error! "+t),e.resettoken=""}))}}var o=angular.module("myApp");e.$inject=["$scope","$http","$cookieStore","$location","ENV","$routeParams"],o.controller("ForgetCtrl",e)}(),app.directive("jlhype",function(){var e={};return e.restrict="E",e.template="",e.compile=function(e,o){var t=function(e,o,t){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",t.src),document.getElementsByTagName("head")[0].appendChild(n),o.ready(function(e){var o=$("#"+t.id).find(".HYPE_scene");t.height&&o.css("height",t.height),t.width&&o.css("width",t.width)})};return t},e}),function(){"use strict";function e(e,o,t,n,r,s){e.process="list",e.filterPage="EVENTS",e.getSchedule=function(){o.get(r.rest_server+"schedule?token="+n.get("cand_token")).success(function(o){e.schedules=o,console.log(o)}).error(function(e,o){})},e.getSchedule(),e.filterEvents=function(o){switch(e.filterPage){case"EVENTS":return console.log("filter: events"),"0"==o.type;case"TASKS":return console.log("filter: tasks"),"1"==o.type;default:console.log("There should not be a default failover at this thing.")}},e.changeApplicationStatus=function(s,a){n.get("cand_token")||t.path("/login"),o.post(r.rest_server+"schedule/changeappstatus?token="+n.get("cand_token"),{timeid:s,status:a}).success(function(o){e.getSchedule()}).error(function(e,o){switch(e){case"notallowed":alert("You cannot make that status change.");break;case"notauthorized":alert("You are not authenticated to perform this action.");break;default:alert("Please contact out admin for assistance.")}})}}var o=angular.module("myApp");e.$inject=["$scope","$http","$location","$cookieStore","ENV","$routeParams"],o.controller("CalendarCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s){e.process="list",e.filterPage="EVENTS",console.log("calendar ctrl"+s.emp_id),e.getSchedule=function(){o.post(r.rest_server+"schedule/getschedulebyemp?token="+n.get("cand_token"),{companyname:s.companyname}).success(function(o){e.schedules=o}).error(function(e,o){})},e.getSchedule(),e.selectTimeslot=function(t,s){o.post(r.rest_server+"schedule/selecttimeslot?token="+n.get("cand_token"),{timeslot_id:t,status:s}).success(function(o){e.getSchedule()}).error(function(e,o){switch(e){case"alreadyselected":alert("You have already selected this timeslot.");break;case"novacancies":alert("There are no more vacancies for this timeslot.");break;case"appliedschedule":alert("You can only apply for one timeslot for this event.");break;case"notinvited":alert("This is a private event and you do not have invitation.");break;default:alert("You are not able to register for this timeslot. Please contact out admin for assistance.")}})},e.filterEvents=function(o){switch(e.filterPage){case"EVENTS":return console.log("filter: events"),"0"==o.type;case"APPLIED":return console.log("filter: APPLIED"),"1"==o.applied?!0:!1;case"INVITATIONS":return console.log("filter: INVITED"),"1"==o.invited;case"TASKS":return console.log("filter: TASKS"),"1"==o.type;default:console.log("There should not be a default failover at this thing.")}},e.getWidth=function(e,o){return 0==o?100:100-100*((o-e)/o)},e.changeApplicationStatus=function(s,a){n.get("cand_token")||t.path("/login"),o.post(r.rest_server+"schedule/changeappstatus?token="+n.get("cand_token"),{timeid:s,status:a}).success(function(o){e.getSchedule()}).error(function(e,o){switch(e){case"notallowed":alert("You cannot make that status change.");break;case"notauthorized":alert("You are not authenticated to perform this action.");break;default:alert("Please contact out admin for assistance.")}})}}var o=angular.module("myApp");e.$inject=["$scope","$http","$location","$cookieStore","ENV","$routeParams"],o.controller("CalendarEmplrCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a,i,l,c){e.token=s.token,t.get(a.rest_server+"candidates/feedbackload/"+e.token).success(function(o){e.candname=o.candname}).error(function(e){alert("Token expired")}),e.submitFeedback=function(o,n){t.post(a.rest_server+"candidates/createfeedback?token="+e.token,o).success(function(e,o){200==o&&alert("Thanks for giving feedback")}).error(function(e){alert("Token expired")})}}var o=angular.module("myApp");e.$inject=["$scope","$cookieStore","$http","$timeout","$location","$routeParams","ENV","mySession","Lightbox","$sce"],o.controller("feedbackCtrl",e)}(),function(){"use strict";function e(e,o,t,n){e.$on("$routeChangeStart",function(n,r,s){t.loggedIn()&&o.getNotifications().then(function(o){e.$broadcast("newNotifications",o)},function(e,o){console.error("Error loading notifications: "+o)})})}var o=angular.module("myApp");e.$inject=["$rootScope","InboxManager","mySession","mySearchFields"],o.run(e)}(),function(){"use strict";function e(e,o,t,n){e.search="",e.messages=[],n.getMessages().then(function(o){e.messages=o,console.info(o)},function(e,o){console.error("inboxCtrl: Error loading messages: "+o)}),e.goToConversation=function(e){t.path("/inbox/conversation/"+e)},e.refresh=function(){o.reload()}}var o=angular.module("myApp");e.$inject=["$scope","$route","$location","InboxManager"],o.controller("inboxCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a,i,l){e.AWS_URL=s.aws_url,e.my_info=null,e.conversation_info=null,e.conversation=[],e.conversation_id=n.cid,e.job_id=n.jid,e.my_info=l.my_info,e.conversation_info=l.conversation,e.conversation=l.messages,r.resetConversationNotify(e.conversation_id),setTimeout(function(){t.hash("message_id"+e.conversation[e.conversation.length-1].message_id),console.log("In conv ctrl, hashing"),i(),document.getElementById("reply1").focus()},300),e.sendReply=function(o){void 0!==o&&""!==o&&r.postReply(e.conversation_id,o,e.job_id).then(function(o){e.refresh()},function(e,o){console.error("conversationCtrl: Error posting replay: "+o)})},e.goToInbox=function(){t.path("/inbox")},e.refresh=function(){r.getConversation(e.conversation_id).then(function(o){e.conversation=o.messages,t.hash("message_id"+e.conversation[e.conversation.length-1].message_id),console.log("Hash set to: message_id"+e.conversation[e.conversation.length-1].message_id),i(),document.getElementById("reply1").focus(),console.log("REFRESHED")},function(e,o){console.error("conversationCtrl: Error loading conversation: "+o)})}}var o=angular.module("myApp");e.$inject=["$scope","$route","$location","$routeParams","InboxManager","ENV","mySession","$anchorScroll","gconv"],o.controller("conversationCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s){e.token=o.get("cand_token"),e.AWS_URL=s.aws_url,t.get(s.rest_server+"applications?token="+e.token).success(function(o){e.jobList=o,console.log("applicationsCtrl-> GET sucessful, got :"),console.info(o)}).error(function(e,o){r.path("/login")})}var o=angular.module("myApp");e.$inject=["$scope","$cookieStore","$http","$timeout","$location","ENV"],o.controller("applicationsCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s){e.token=o.get("cand_token"),e.AWS_URL=s.aws_url,t.get(s.rest_server+"favorites?token="+e.token).success(function(o){e.jobList=o,console.log("favsCtrl-> GET sucessful, got :"),console.info(o)}).error(function(e,o){r.path("/login")}),e.toggleFavorite=function(o){myFavorites.favorite(o.id,o.isFavorited,e.token).then(function(e){o.isFavorited=e},function(e,o){console.error("Favorite: Error toggling favorite: "+o)})}}var o=angular.module("myApp");e.$inject=["$scope","$cookieStore","$http","$timeout","$location","ENV"],o.controller("favsCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a,i,l){e.advsearch=i.srch,e.token=o.get("cand_token"),e.gotoJob=function(e){s.path("/job/jobid/"+e)},e.isLoggedIn=function(){return o.get("cand_token")?!0:!1},e.$watch("advsearch.keyword",function(e,o){i.srch.keyword=e}),e.searchJobs=function(){return void 0!=l.empid?(t.get(a.rest_server+"jobs?empid="+l.empid+"&token="+e.token).success(function(o){i.foundJobs=o,e.list=o,e.currentPage=1,e.entryLimit=5,e.filteredItems=e.list.length,e.totalItems=e.list.length,console.log("jobsCtrl->searchJobs: Success searching Jobs"),console.info(o),l.empid=void 0}).error(function(e,o){console.error("jobsCtrl->searchJobs: Error searching Jobs : "+o)}),!1):void i.searchJobs({token:e.token}).then(function(o){e.list=o,e.currentPage=1,e.entryLimit=5,e.filteredItems=e.list.length,e.totalItems=e.list.length,console.log("jobsCtrl->searchJobs: Success searching Jobs"),console.info(o)},function(e){console.error("jobsCtrl->searchJobs: Error searching Jobs : "+e)})},e.isearch={keywords:"",cat:"",type:"",town:""},e.setCategory=function(o,t){i.srch.cat=o,e.catname=t,console.log("*****setting category to: "+e.isearch.cat)},e.setType=function(o,t){i.srch.type=o,e.typeName=t},e.setTown=function(o,t){i.srch.town=o,e.townName=t},e.searchJobs(),e.setPage=function(o){e.currentPage=o},e.filter=function(){n(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(o){e.predicate=o,e.reverse=!e.reverse},e.favorite=function(o){console.log("Favoriting job id: "+o.id),console.info(o),"0"==o.isFavorited?(console.log("Enablining favorite, current val: "+o.isFavorited),t.post(a.rest_server+"favorites?token="+e.token,{job_id:o.id}).success(function(e,t){console.log("jobsCtrl: created favorite successfully for job: "+t),o.isFavorited="1"}).error(function(e,o){console.log("jobsCtrl: Error creating favorite "+o)})):(console.log("Disabling favorite, current val: "+o.isFavorited),t({url:a.rest_server+"favorites?token="+e.token,method:"DELETE",data:{job_id:o.id},headers:{"Content-Type":"application/json; charset=UTF-8"}}).success(function(e,t,n,r){console.log("jobsCtrl: deleted favorite successfully for job: "+e.job_id),o.isFavorited="0"}))},e.apply=function(o,n){console.log("Applying to job id: "+o.id),console.info(o),"0"==o.hasApplied?(console.log("Applying to job , current val: "+o.hasApplied),t.post(a.rest_server+"applications?token="+e.token,{job_id:o.id}).success(function(e,t){console.log("jobsCtrl: created application successfully for job: "+t),o.hasApplied="1"}).error(function(e,o){console.log("jobsCtrl: Error creating application "+o)})):console.log("Disabling button, should have never been enabled current val: "+o.hasApplied)}}var o=angular.module("myApp");e.$inject=["$scope","$cookieStore","$http","$timeout","$route","$location","ENV","mySearch","$routeParams"],o.controller("jobsCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a,i,l,c,u,d){e.token=a.get("cand_token"),console.log("YOU selected job details id: "+s.jobid),e.jobDet={},o.get(r.rest_server+"job?jobid="+s.jobid+"&token="+e.token).success(function(o){e.jobDet=o[0],e.questions=o.questions,console.log("Title of job is>>>: "+e.jobDet.title),console.info(e.jobDet),console.info(e.questions)}),e.test=function(){console.log("Does this work??????")},e.testit=function(o){console.log("EXEC -> testit(answers)"),e.ans=[],angular.forEach(o,function(e,o){this.push({job_id:e.job_id,question:e.question,answer:e.answer,question_id:e.question_id})},e.ans),console.info(e.ans)},e.zapply=function(t,n){if(console.log("Applying to job ID===: "+n.id),e.ans=[],"0"==n.hasApplied){console.log("Applying to job , current val: "+n.hasApplied),angular.forEach(t,function(e,o){this.push({job_id:e.job_id,question_id:e.question_id,question:e.question,answer:e.answer?e.answer:""})},e.ans),console.log("Submitting the following answer data struc: "),console.info(e.ans);var s=e.getReferrer();o({url:r.rest_server+"applications?jobid="+n.id+"&title="+n.title+"&url="+s+"&token="+e.token,method:"POST",data:e.ans}).success(function(e,o){console.log("jobDetailsCtrl: created application successfully for job: "+o),n.hasApplied="1"}).error(function(e,o){console.log("jobDetailsCtrl: Error creating application "+o)})}else console.log("Disabling button, should have never been enabled current val: "+n.hasApplied)},e.getReferrer=function(){var e=document.referrer;e||(console.log("No document.referrer, proceeding as jobslah.com"),e="//www.jobslah.com");var o=e.indexOf("://"),t=e.indexOf("/",o+3);return-1==t&&(t=e.length),e=e.substring(o+3,t)},e.getRef=function(){var t=e.getReferrer();o.get(r.rest_server+"referrer?type=job&id="+s.jobid+"&site="+t).success(function(e){console.log("referral link: success")}).error(function(e,o,t,n){switch(o){case 501:console.log("referral link: failed")}})},e.getRef(),e.isLoggedIn=function(){return a.get("cand_token")?!0:!1},e.hasApplied=function(){return"1"==e.jobDet.hasApplied},e.sendMessage=function(){console.log("Send a message..."),l.getConversationId(e.jobDet.id).then(function(o){var t=o;n.path("/inbox/conversation/"+t+"/"+e.jobDet.id)},function(e,o){console.error("jobDetailsCtrl: Error retrieving conversation by job: "+o)})},e.showDialogLogin=function(e){c.show({controller:"LoginCtrl",templateUrl:r.base_url+"assets/zpartials/cand-login_d.html",parent:angular.element(document.body),targetEvent:e}).then(function(e){console.log("Login for email: ")},function(){console.log("After then - what is this???.")})},e.showDialogRegister=function(e){c.show({controller:"RegisterCtrl",templateUrl:r.base_url+"assets/zpartials/cand-register_d.html",parent:angular.element(document.body),targetEvent:e}).then(function(e){},function(){})},e.toggleFavorite=function(o){u.favorite(o.id,o.isFavorited,e.token).then(function(e){o.isFavorited=e},function(e,o){console.error("Favorite: Error toggling favorite: "+o)})}}var o=angular.module("myApp");e.$inject=["$scope","$http","$timeout","$location","ENV","$routeParams","$cookieStore","mySession","InboxManager","$mdDialog","myFavorites","$route"],o.controller("jobDetailsCtrl",e)}(),function(){function e(e){return e.zip.replace(/^\s+|\s+$/gm,"")}function o(e){return[e.address].join(", ")}function t(e){return e.address}var n,r;app.factory("jobManager",["$q","$http",function(r,s){var a=function(s){var a={},i=function(){var e=(new google.maps.Geocoder,this),o=(e.address,function(e){var o="";return o+=e.jobs.length>1?e.jobs.length+" jobs in ":e.jobs[0].title+" job in ",o+=e.title});return r(function(t,r){if(e._marker)return void t(e._marker);if(e.jobs[0].addr_lat)var s=new google.maps.LatLng(e.jobs[0].addr_lat,e.jobs[0].addr_long);else var s=new google.maps.LatLng(e.jobs[0].lat,e.jobs[0]["long"]);var a=new google.maps.Marker({position:s,title:o(e),map:n});a.build=e,e._marker=a,t(a)})};return _.each(s,function(n){var r=e(n);r in a||(a[r]={jobs:[],title:t(n),address:o(n),getMarker:i,_marker:null}),a[r].jobs.push(n)}),a};return{assembleBuilds:a}}]).factory("InboxManager",["$q","$http","$cookieStore","ENV",function(e,o,t,n){return{getMessages:function(){var r=e.defer(),s=t.get("cand_token");return console.log(n.rest_server+"messages?token="+s),o.get(n.rest_server+"messages?token="+s).success(function(e){r.resolve(e)}).error(function(e,o){r.reject(e,o)}),r.promise},getConversation:function(r){var s=e.defer(),a=t.get("cand_token");return console.log(n.rest_server+"messages/conversation/"+r+"?token="+a),o.get(n.rest_server+"messages/conversation/"+r+"?token="+a).success(function(e){s.resolve(e)}).error(function(e,o){s.reject(e,o)}),s.promise},postReply:function(r,s,a){var i=e.defer(),l=t.get("cand_token");return console.log(n.rest_server+"messages/reply/"+r+"?token="+l),o.post(n.rest_server+"messages/reply/"+r+"?token="+l,{reply:s,job_id:a}).success(function(e){i.resolve(e)}).error(function(e,o){i.reject(e,o)}),i.promise},getConversationId:function(r){var s=e.defer(),a=t.get("cand_token");return console.log(n.rest_server+"messages/init?token="+a),o.post(n.rest_server+"messages/init?token="+a,{job_id:r}).success(function(e){s.resolve(e)}).error(function(e,o){s.reject(e,o)}),s.promise},resetConversationNotify:function(r){var s=e.defer(),a=t.get("cand_token");return console.log(n.rest_server+"messages/reset/"+r+"?token="+a),o.get(n.rest_server+"messages/reset/"+r+"?token="+a).success(function(e){s.resolve(e)}).error(function(e,o){s.reject(e,o)}),s.promise},getNotifications:function(){var r=e.defer(),s=t.get("cand_token");return console.log(n.rest_server+"messages/notifications?token="+s),o.get(n.rest_server+"messages/notifications?token="+s).success(function(e){r.resolve(e)}).error(function(e,o){r.reject(e,o)}),r.promise}}}]).controller("JobMapCtrl",["$scope","$location","$http","jobManager","mySearch",function(e,o,t,n,s){e.onmapJobs=[],e.mySearch=s,e.jobs=[],e.builds=[],e.backendUrl="",e.map={all_markers:[],bound_markers:[]},e.onViewLoad=function(){function t(){var o=e.mySearch.srch.radiusCenter,t=e.mySearch.srch.radius;o&&t&&i.fitBounds(g.getBounds())}var a=(_.defaults(o.search(),{lat:1.3058358,lng:103.8618718,zoom:11}),{center:new google.maps.LatLng(s.mapState.centerLat,s.mapState.centerLong),zoom:s.mapState.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP}),i=new google.maps.Map(document.getElementById("map_canvas"),a);r=new MarkerClusterer(i,[],{maxZoom:15});var l=new google.maps.Geocoder,c=new google.maps.InfoWindow,u=_.template(document.getElementById("infowindowtemplate").innerHTML);e.geolocate=function(){return navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(o){e.$apply(function(){var t=new google.maps.LatLng(o.coords.latitude,o.coords.longitude);i.setCenter(t),e.map.circle.visible=!0,e.map.circle.center=t})}),!1},e.searchZip=function(){var o=e.filter.zip,t={address:o,region:"SG"};l.geocode(t,function(o,t){if(t==google.maps.GeocoderStatus.OK){var n=o[0].geometry.location;i.setCenter(n),e.$apply(function(){e.map.circle.center=n,e.map.circle.visible=!0,e.filter.radius=1e4})}})},e.$watchCollection("mySearch.foundJobs",function(){e.jobs=s.foundJobs,e.builds=n.assembleBuilds(e.jobs)});var d=function(){var o=e.map.all_markers,t=new google.maps.LatLngBounds;o.length&&(_(o).each(function(e){var o=e.getPosition();o.lat()>85||o.lng()<-85||t.extend(o)}),i.fitBounds(t),i.getZoom()>15&&i.setZoom(15))};e.$watchCollection("builds",function(o){r.clearMarkers(),e.map.all_markers=[],_.each(o,function(o,n){o.getMarker().then(function(s){
r.addMarker(s),e.map.all_markers.push(s),d(),t(),google.maps.event.addListener(s,"click",function(){var e=u({build:o,buildId:n});c.close(),c.setContent(e),c.open(i,s)})})})});var g=new google.maps.Circle({clickable:!1,strokeColor:"#AA0000",fillOpacity:.05,strokeWeight:1}),p=new google.maps.Marker({map:i,icon:"//maps.google.com/mapfiles/ms/icons/blue-dot.png",title:"radius center"});g.bindTo("center",p,"position"),s.srch.radiusCenter&&p.setPosition(s.srch.radiusCenter),e.$watch("mySearch.srch.radius",function(e){""!=e?(g.setMap(i),p.setMap(i),g.setRadius(parseInt(e)),i.fitBounds(g.getBounds())):(g.setMap(null),p.setMap(null))}),e.$watch("mySearch.srch.radiusCenter",function(e){e&&p.setPosition(s.srch.radiusCenter)});var f=function(){e.onmapJobs=[];var o=i.getBounds();_.each(r.getMarkers(),function(t){o.contains(t.getPosition())&&Array.prototype.push.apply(e.onmapJobs,t.build.jobs)})};google.maps.event.addListener(i,"idle",function(){e.$apply(function(){f()})}),e.$watchCollection("map.all_markers",f),google.maps.event.addListener(i,"idle",function(){_(s.mapState).extend({centerLat:i.getCenter().lat(),centerLong:i.getCenter().lng(),zoom:i.getZoom()})})}}])}(),function(){"use strict";function e(e,o,t,n,r,s,a,i,l,c){e.companyname=s.companyname,e.profile={},e.landingchunk={},e.AWS_URL=a.aws_url,e.landing={},e.$watch("companyname",function(){void 0!=e.companyname&&t.get(a.rest_server+"go/companyname/"+e.companyname).success(function(o){console.log(o),e.landingchunk=o})}),t.get(a.rest_server+"go/companyname/"+e.companyname).success(function(o){e.landingchunk=o,e.profile=o.emp_info,e.employer_id=o.emp_id,console.log("retrieved employer's id="+e.employer_id),e.getRef()}),e.searchJobs=function(){e.employer_id?r.path("/adv/"+e.employer_id):r.path("/adv")},e.images=[],e.$watch("landingchunk",function(){e.images=[],angular.forEach(e.landingchunk,function(o,t){angular.forEach(o,function(e,o){var t={};"pano"==e.type?(console.log("myvideo link"+e.videolink),t.url=c.trustAsResourceUrl(e.videolink)):t.url=c.trustAsResourceUrl(a.aws_url+e.imageurl),t.caption=e.texdesc,t.thumbUrl=e.imageurl,this.push(t)},e.images)},e.images)}),e.openLightboxModal=function(o){l.templateUrl="<?php echo base_url();?>assets/components/angular-lightbox/lightbox.html",l.openModal(e.images,o)},e.openPanoModal=function(o){l.templateUrl="<?php echo base_url();?>assets/components/angular-lightbox/lightbox-pano.html",l.openModal(e.images,o)},e.getRef=function(){var o=document.referrer;o||(console.log("No document.referrer, proceeding as jobslah.com"),o="https://www.jobslah.com");var n=o.indexOf("://"),r=o.indexOf("/",n+3);-1==r&&(r=o.length),o=o.substring(n+3,r),t.get(a.rest_server+"referrer?type=page&id="+e.employer_id+"&site="+o).success(function(e){console.log("referral link: success")}).error(function(e,o,t,n){switch(o){case 501:console.log("referral link: failed")}})}}var o=angular.module("myApp");e.$inject=["$scope","$cookieStore","$http","$timeout","$location","$routeParams","ENV","mySession","Lightbox","$sce"],o.controller("employerslandingCrtl",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{},link:function(o,t,n){o.url=e.trustAsResourceUrl(n.video)},template:'<iframe allowfullscreen="" style="{{istyle}}" class="embed-responsive-item" ng-src="{{url}}"></iframe>'}}var o=angular.module("myApp");e.$inject=["$sce"],o.directive("youtubeBox",e)}(),function(){"use strict";function e(e,o,t,n,r){e.onmapJobs=[],e.mySearch=r,e.jobs=[],e.builds=[],e.backendUrl="",e.map={all_markers:[],bound_markers:[]},e.onViewLoad=function(){function o(){var o=e.mySearch.srch.radiusCenter,t=e.mySearch.srch.radius;o&&t&&a.fitBounds(g.getBounds())}var s=(_.defaults(t.search(),{lat:1.3058358,lng:103.8618718,zoom:11}),{center:new google.maps.LatLng(r.mapState.centerLat,r.mapState.centerLong),zoom:r.mapState.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP}),a=new google.maps.Map(document.getElementById("map_canvas"),s),i=new MarkerClusterer(a,[],{maxZoom:15}),l=new google.maps.Geocoder,c=new google.maps.InfoWindow,u=_.template(document.getElementById("infowindowtemplate").innerHTML);e.geolocate=function(){return navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(o){e.$apply(function(){var t=new google.maps.LatLng(o.coords.latitude,o.coords.longitude);a.setCenter(t),e.map.circle.visible=!0,e.map.circle.center=t})}),!1},e.searchZip=function(){var o=e.filter.zip,t={address:o,region:"SG"};l.geocode(t,function(o,t){if(t==google.maps.GeocoderStatus.OK){var n=o[0].geometry.location;a.setCenter(n),e.$apply(function(){e.map.circle.center=n,e.map.circle.visible=!0,e.filter.radius=1e4})}})},e.$watchCollection("mySearch.foundJobs",function(){e.jobs=r.foundJobs,e.builds=n.assembleBuilds(e.jobs)});var d=function(){var o=e.map.all_markers,t=new google.maps.LatLngBounds;o.length&&(_(o).each(function(e){var o=e.getPosition();o.lat()>85||o.lng()<-85||t.extend(o)}),a.fitBounds(t),a.getZoom()>15&&a.setZoom(15))};e.$watchCollection("builds",function(t){i.clearMarkers(),e.map.all_markers=[],_.each(t,function(t,n){t.getMarker().then(function(r){i.addMarker(r),e.map.all_markers.push(r),d(),o(),google.maps.event.addListener(r,"click",function(){var e=u({build:t,buildId:n});c.close(),c.setContent(e),c.open(a,r)})})})});var g=new google.maps.Circle({clickable:!1,strokeColor:"#AA0000",fillOpacity:.05,strokeWeight:1}),p=new google.maps.Marker({map:a,icon:"//maps.google.com/mapfiles/ms/icons/blue-dot.png",title:"radius center"});g.bindTo("center",p,"position"),r.srch.radiusCenter&&p.setPosition(r.srch.radiusCenter),e.$watch("mySearch.srch.radius",function(e){""!=e?(g.setMap(a),p.setMap(a),g.setRadius(parseInt(e)),a.fitBounds(g.getBounds())):(g.setMap(null),p.setMap(null))}),e.$watch("mySearch.srch.radiusCenter",function(e){e&&p.setPosition(r.srch.radiusCenter)});var f=function(){e.onmapJobs=[];var o=a.getBounds();null!=o&&_.each(i.getMarkers(),function(t){o.contains(t.getPosition())&&Array.prototype.push.apply(e.onmapJobs,t.build.jobs)})};google.maps.event.addListener(a,"idle",function(){e.$apply(function(){f()})}),e.$watchCollection("map.all_markers",f),google.maps.event.addListener(a,"idle",function(){_(r.mapState).extend({centerLat:a.getCenter().lat(),centerLong:a.getCenter().lng(),zoom:a.getZoom()})})}}var o=angular.module("myApp");e.$inject=["$scope","$http","$location","jobManager","mySearch"],o.controller("JobMapCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s){e.name=r.name,o.close=function(e){s.path(e),n("left").close()}}var o=angular.module("myApp");e.$inject=["$rootScope","$scope","$timeout","$mdSidenav","mySession","$location"],o.controller("LeftCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a,i){t.isearch=a.srch,t.radius="",t.zipcode="",t.radiusDisabled=!0,t.submit=function(){a.searchJobs(),0===n.path().indexOf("/map")?t.changeView("/map"):t.changeView("/adv",!0)},t.$watch("isearch.keyword",function(e,o){a.srch.keyword=e}),t.$watch("zipcode",function(e){e=e.replace(/^\s+|\s+$/gm,""),""!=e?t.radiusDisabled=!1:t.radiusDisabled=!0,a.srch.zipcode=e}),t.setCategory=function(e,o){a.setCategory(e,o),t.catName=o},t.$watch("radius",function(e){a.setRadius(e)}),t.setType=function(e,o){a.srch.type=e,t.typeName=o},t.setTown=function(e,o){a.srch.town=e,t.townName=o},t.resetSrch=function(){a.resetSrch(),t.catName="",t.typeName="",t.townName="",t.zipcode=""},t.geolocate=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var o=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),n=new google.maps.Geocoder,r={latLng:o};n.geocode(r,function(e,o){if(o==google.maps.GeocoderStatus.OK){var n=e[0].address_components,r=n[n.length-1].long_name;t.$apply(function(){t.zipcode=r})}})})},t.close=function(){s("right").close(),t.submit()}}var o=angular.module("myApp");e.$inject=["$http","ENV","$scope","$location","$timeout","$mdSidenav","mySearch","mySearchFields"],o.controller("rightMenuCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a,i,l,c){e.$on("newNotifications",function(o,t){e.notifications=t}),e.title1="Button",e.title4="Warn",e.isDisabled=!0,e.googleUrl="//google.com",e.toggleLeft=function(){l("left").toggle()},e.toggleRight=function(){l("right").toggle()},e.token=t.get("cand_token"),e.name=t.get("name"),e.profile={},e.AWS_URL=a.aws_url,e.loggedIn=i.loggedIn(),e.$on("loginout",function(){e.loggedIn=i.loggedIn(),e.name=i.name}),e.setPage=function(o){e.currentPage=o},e.filter=function(){r(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(o){e.predicate=o,e.reverse=!e.reverse},e.goBack=function(){window.history.back()},e.changeView=function(e,t){console.log("candidateCtrl.changeView passed:",e),s.path()!=e?s.path(e):t&&(console.info("reloading route"),o.reload())},e.logout=function(){return t.remove("cand_token"),t.remove("cand_token"),t.remove("name"),i.name="",e.name="",e.token=null,e.token=!1,e.notifications=0,console.log("Logging out... "),console.log("Cookie should be empty: "+t.get("cand_token")),e.loggedIn=i.loggedIn(),s.path("/login"),!1},e.isCandidate=function(){return i.loggedIn()},e.back=function(){$window.history.back()},e.showSimpleDialog=function(e,o,t){c.show(c.alert().parent(angular.element(document.body)).title(e).content(o).ariaLabel("Registration").ok("Got it!").targetEvent(t))}}var o=angular.module("myApp");e.$inject=["$scope","$route","$cookieStore","$http","$timeout","$location","ENV","mySession","$mdSidenav","$mdDialog"],o.controller("candidateCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r){e.token=t.get("cand_token"),void 0!==e.token?$tokenStr="jobs?token="+e.token:($tokenStr="jobs",e.changeView("/login")),e.showLoading=!0,console.log("candidateDashMainCtrl: Getting jobs for candidate token "+e.token),o.get(n.rest_server+$tokenStr).success(function(o){e.jobs=o,e.showLoading=!1,console.log("candidateDashMainCtrl - Success, token valid, Data returned: "+o)}).error(function(o,t){console.log("candidateDashMainCtrl: Error getting Jobs Data: "+t),e.changeView("/login")})}var o=angular.module("myApp");e.$inject=["$scope","$http","$cookieStore","ENV","$location"],o.controller("candidateDashMainCtrl",e)}(),function(){"use strict";function e(e,o,t,n,r,s,a){e.avails={},e.token=r.get("cand_token"),e.showLoading=!0,e.AWS_URL=s.aws_url,e.AWS_DOC="https://<?=AWS_RESUME_BUCKET?>.s3.amazonaws.com/",e.profile={};var i=e.uploader1=new a({url:"candidates/uploadresume"});i.filters.push({name:"customFilter",fn:function(e,o){return this.queue.length<10}}),i.onWhenAddingFileFailed=function(e,o,t){console.info("onWhenAddingFileFailed",e,o,t)},i.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},i.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},i.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},i.onProgressItem=function(e,o){console.info("onProgressItem",e,o)},i.onProgressAll=function(e){console.info("onProgressAll",e)},i.onSuccessItem=function(e,o,t,n){console.info("onSuccessItem",e,o,t,n)},i.onErrorItem=function(e,o,t,n){console.info("onErrorItem",e,o,t,n)},i.onCancelItem=function(e,o,t,n){console.info("onCancelItem",e,o,t,n)},i.onCompleteItem=function(o,t,n,r){e.profile.resumeurl=t.success,e.profile.resumename=t.filename,alert("resume uploaded successully, click save to confirm"),console.log("telll me response leh:"+t.success)},i.onCompleteAll=function(){console.info("onCompleteAll")},o.get(s.rest_server+"candidates?token="+e.token).success(function(t,r){400>r?(e.profile=t[0],e.profile.feedback=t.feedback,console.log("Retrieved User profile info: "),console.info(t),e.showLoading=!1,e.avail_m={},e.avail_a={},e.avail_e={},o.get(s.rest_server+"availability?token="+e.token).success(function(o){e.avails=o,console.info(o)})):n.path("/login"),console.log("candidateProfileCrtl returned: "),console.info(t)}).error(function(e,o){n.path("/login")}),e.showLoading=!1,e.uploader={controllerFn:function(o,t,n){console.log(o,t,n),e.uploadermessage=angular.fromJson(n),e.profile.imageurl=e.uploadermessage.success}},e.submitEdits=function(t){e.showPwdError=0,console.log("candidateProfileCrtl: submitting this citizen_pr PUT: "+t.is_citizen_pr),t.token=e.token,console.info(t),o({url:s.rest_server+"candidates?token="+e.token,method:"PUT",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}}).success(function(o,t){e.showMsg1="1",e.profileForm.$setPristine(),e.profileFormDetails.$setPristine(),e.profileFormAcct.$setPristine(),"passwordupdated"==o.msg?alert("Password changed"):"emailupdated"==o.msg?alert("Email change request is accepted, please check your email inbox for verification email. Also, please logout and log back in."):alert("Record saved!"),console.log("candidateProfileCrtl: edited profile successfully")}).error(function(o,t){console.log("ERROR SAVING"),console.info(o),"wrongpassword"==o.msg?(e.showPwdError=1,alert("saving failed due to wrong password")):"invalidic"==o.msg?alert("Saving failed due to invalid IC"):alert("Unexpected error occurred"),console.log("candidateProfileCrtl: Error editing profile"+t)})},e.savePicture=function(o,t){console.log("called savePicture()"),e.submitEdits(o),t.cancel()},e.cancelPicture=function(t){t.cancel(),o.get(s.rest_server+"candidates?token="+e.token).success(function(o){e.profile=o,console.log("Retrieved User profile info: "),console.info(o)})},e.gete=function(e){},e.checkboxclick=function(){e.availForm.$setDirty()},e.updatecal=function(t){console.log("candidateProfileCrtl -> updateCal with following info: "),console.info(t),o({url:s.rest_server+"availability?token="+e.token,method:"PUT",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}}).success(function(o,t,n,r){console.log("Returned From PUT, contents: "),console.info(o),200===t?(e.avails=o,e.avails.saved=1,$("#message").text("updated successfully"),e.availForm.$setPristine()):console.log("bad")})},e.sendRequest=function(t){o.post(s.rest_server+"candidates/feedbackreq?token="+e.token,t).success(function(e,o){200==o&&alert("feed back request sent!")}).error(function(e){alert("login session expired"),n.path("/login")})},e.togglePublish=function(t,r){o.get(s.rest_server+"candidates/feedbacktoggle?token="+e.token+"&feedbackId="+t).success(function(o,n){if(200==n){1==o.publish?alert("published!"):alert("unpunblished");var r=0;angular.forEach(e.profile.feedback,function(n){n.id==t&&(e.profile.feedback[r].publish=o.publish),r++})}}).error(function(e){alert("login session expired"),n.path("/login")})}}var o=angular.module("myApp");e.$inject=["$scope","$http","$timeout","$location","$cookieStore","ENV","FileUploader"],o.controller("candidateProfileCrtl",e)}(),function(){"use strict";function e(e,o,t,n,r){e.qnNo=0,e.questionset=null,e.answerset={},e.score=null,e.token=o.get("cand_token"),void 0!==e.token,e.getQuiz=function(){t.get(n.rest_server+"quiz/random?token="+e.token).success(function(o,t,n,r){var s=[];for(var a in o.data){var i=o.data[a];s.push(i)}e.questionset=s,e.qnNo=0,e.total_qns=e.questionset.length}).error(function(e,o,t,n){console.log("quizCtrl: failed with status "+o)})},t.get(n.rest_server+"quiz/score?token="+e.token).success(function(o,t,n,r){e.score=o.data,e.score.length<=0&&e.getQuiz()}).error(function(e,o,t,n){console.log("quizCtrl: failed with status "+o)}),e.getPercentage=function(e){var o=parseInt(e.score)+parseInt(e.neg_score);return Math.round(e.score/o*100)},e.selectAns=function(o,t){e.answerset[o]=t,console.log("QID:"+o+" AID:"+t),++e.qnNo>=e.questionset.length&&e.submitAnswers()},e.getNextQuestion=function(o,r){t.get(n.rest_server+"quiz/next?token="+e.token+"&qid="+o+"&cqid="+r).success(function(o,t,n,r){console.log("quizCtrl -> getNextQuestion: success with status"+t),e.questionset=o,e.qnNo++}).error(function(e,o,t,n){console.log("quizCtrl -> getNextQuestion: failed with status "+o)})},e.submitAnswers=function(){t.get(n.rest_server+"quiz/submit?token="+e.token+"&answers="+JSON.stringify(e.answerset)).success(function(o,t,n,s){console.log("quizCtrl -> submitAnswers: success with status"+t+" and data: "+o),e.showSimpleDialog("Done!","You're finished, checkout your results!"),r.reload()}).error(function(e,o,t,n){console.log("quizCtrl -> submitAnswers: failed with status "+o+" and data: "+e),r.reload()})}}var o=angular.module("myApp");e.$inject=["$scope","$cookieStore","$http","ENV","$route"],o.controller("quizCtrl",e)}();