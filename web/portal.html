<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>FundingME</title>

    <!-- Bootstrap Core CSS -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="dist/css/sb-admin-2.css" rel="stylesheet">
    <link href="css/fundingme.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->



</head>

<body ng-app="myApp">

<ng-view></ng-view>
    <!-- jQuery -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="bower_components/metisMenu/dist/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/fundingme.js"></script> 
    
<!-- Angular Material Dependencies -->
<script src="http://cdn.jsdelivr.net/hammerjs/2.0.4/hammer.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-animate.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-aria.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular-cookies.js"></script>
<script src="angular/angular-route.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.9.4/angular-material.min.js"></script>
<script src="http://cdn.jsdelivr.net/angular-material-icons/0.4.0/angular-material-icons.min.js"></script>

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>
<script src="js/ui-bootstrap-tpls-0.10.0.min.js"></script>
 <script src="angular/angular-resource.js"></script>
<script src="js/ng-flow-standalone.min.js"></script>
<script >
var app = angular.module('myApp', [
'ngCookies',  
'ngRoute',
'ui.bootstrap', 
'ngMaterial',
'flow',
'ngResource'
]);

app.constant('ENV',{
    base_url: "",
    rest_server: ""
    });
// RegisterCtrl ***
(function(){    
    'use strict';
    var app= angular.module('myApp');

    RegisterCtrl.$inject = ['$scope', '$http', '$cookieStore', '$location','ENV'];
/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

(function(){    
    'use strict';
    var app = angular.module('myApp');

    configuration.$inject = ['$routeProvider','$httpProvider' ,'ENV' ,'$locationProvider', '$mdThemingProvider'];

    app.config(configuration);
    
    function configuration($routeProvider, $httpProvider, ENV, $locationProvider, $mdThemingProvider) {

        $routeProvider.
              // JMR only temp for now...  when("/candmain", {templateUrl: ENV.base_url+"assets/zpartials/cand-main.html", controller: "candidateDashMainCtrl"}).
              when("/signup", {templateUrl: ENV.base_url+"pages/signup.html", controller: "RegisterCtrl"}).
              when("/createprofile", {templateUrl: ENV.base_url+"pages/register.html", controller: "RegisterCtrl"}).
 otherwise({redirectTo: '/signup'});

    }
}());

    
(function(){    
    'use strict';
    var app = angular.module('myApp');

    configuration2.$inject = ['flowFactoryProvider'];

    app.config(configuration2);
    
    function configuration2(flowFactoryProvider) {
            flowFactoryProvider.defaults = {
                permanentErrors: [404, 500, 501],
                maxChunkRetries: 1,
                chunkRetryInterval: 5000,
                simultaneousUploads: 4,
                singleFile: true
            };
            flowFactoryProvider.on('catchAll', function (event) {
                console.log('catchAll', arguments);
            });
            flowFactoryProvider.on('filesSubmitted', function (event) {
                console.log("prevent default");
            });
    }
}());

    app.controller('RegisterCtrl', RegisterCtrl);
    
    function RegisterCtrl ($scope, $http, $cookieStore, $location, ENV) {
        //set the public key from the CI constant
  $scope.registerFn = function(user, clickEvent) {
      $scope.showError = false;
            //check data
            if(!user||!user.email||!user.password){
                $scope.errormsg = "All fields are mandatory.";
                $scope.showError = true;
                $(clickEvent.target).button("reset");
                return false;
            }
            console.log(user)
             $http.post("http://localhost:8000/sme/register", user).success(function(data, status, headers, config) {
                        $(clickEvent.target).button("reset");
                        if (status === 201 || status === 200){
                            $location.path("/createprofile");
                        }
                        }).error(function(data, status){
                            alert("Registration failed");
                        });
        }; //END registerFn


    }
}());

     </script>  
</body>

</html>
